<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<constant name="struts.objectFactory" value="spring" />

	<package name="default" extends="struts-default" namespace="/">
		<!-- Admin登录界面 -->
		<action name="adminlogin" class="adminAction" method="signin">
			<result name="success">/Login_success.jsp</result>
			<result name="input">/Admin_login.jsp</result>
		</action>
		<!-- 注册Librarian界面 -->
		<action name="librariansignup" class="librarianAction"
			method="signup">
			<result name="success">/Librarian_success.jsp</result>
			<result name="input">/Admin_register.jsp</result>
		</action>
		<!-- Admin 修改密码 -->
		<action name="changePassword" class="adminAction"
			method="changePassword">
			<result name="success">/Change_Success.jsp</result>
			<result name="input">/Login_success.jsp</result>
			<result name="login">/Admin_login.jsp</result>
		</action>
		<action name="logout" class="adminAction" method="logout">
			<result name="success">/Admin_login.jsp</result>
			<result name="failure">/Admin_login.jsp</result>
		</action>
		<action name="displayLibrarians" class="librarianAction"
			method="show">
			<result name="success">/Librarian.jsp</result>
		</action>
		<!-- Admin修改用户保障金 -->
		<action name="modify" class="adminAction" method="modify">
			<result name="input">/Modify_Deposit.jsp</result>
			<result name="success">/Login_success.jsp</result>
		</action>
		<!-- 展示securityDeposit -->
		<action name="dmodify" class="adminAction" method="dm">
			<result name="success">/Modify_Deposit.jsp</result>
		</action>
		<!-- Admin 找回Librarian 密码 -->
		<action name="findPassword" class="librarianAction"
			method="findPassword">

			<result name="success">/Find_Success.jsp</result>
			<result name="failure">/FindPassword.jsp</result>
		</action>

		<!-- Reader功能 -->
		<!-- 登录登出 -->
		<action name="readersignin" class="readerAction"
			method="signin">
			<result name="success"><!--登录成功后跳转到主页界面 -->
				/index.jsp
			</result>
			<result name="input">/Login.jsp</result>
		</action>

		<!-- Reader界面 -->
		<action name="readersignout" class="readerAction"
			method="signout"><!--登出后跳转到登录界面，后期需要更改 -->
			<result name="success">/index.jsp</result>
		</action>
		<!-- 获取借阅记录 -->

		<!-- 搜索书籍 -->
		<action name="searchBook" class="bookAction"
			method="searchBook">
			<result name="success">/category.jsp</result>
		</action>

		<!-- 当前借阅记录分页查询 -->
		<!-- 借书记录分页查询 -->
		<action name="getReaderStatuForBorrowPage" class="readerAction"
			method="getReaderStatu"><!--获取用户信息 -->
			<result name="success" type="chain"><!--若读者已经登录，获取借阅记录 -->
				<param name="actionName">getBorrowingByReader</param>
			</result>
			<result name="none">/Login.jsp</result><!--若读者未登录，跳转到登录界面 -->
		</action>
		<action name="getBorrowingByReader" class="borrowrecordAction"
			method="getBorrowPageByReader">
			<result name="success" type="chain">
				<param name="actionName">getBooksbyborrowing</param>
			</result>
			<result name="getfine" type="chain">
				<param name="actionName">getReaderFineb</param><!-- 若fine为空，去取fine -->
			</result>
		</action>
		<action name="getReaderFineb" class="borrowrecordAction"
			method="getReaderFine">
			<result name="success" type="chain">
				<param name="actionName">getBooksbyborrowing</param>
			</result>
		</action>
		<action name="getBooksbyborrowing" class="bookAction"
			method="getBooksbyborrowPage"><!-- 依赖借阅记录获取对应的书籍信息 -->
			<result name="success">/ReaderJsp/Reader_borrowed.jsp</result><!--结束action，返回借阅记录界面 -->
		</action>
		<!-- 修改用户名和密码还有头像 -->
		<action name="changeReaderName" class="readerAction"
			method="changeReaderName">
			<result name="success" type="chain">
				<param name="actionName">getReaderStatuForCurrent</param>
			</result>
		</action>
		<action name="changeReaderPassword" class="readerAction"
			method="changeReaderPassword">
			<result name="success" type="chain">
				<param name="actionName">getReaderStatuForCurrent</param>
			</result>
		</action>

		<!--查询当前借阅记录和预约记录 -->
		<action name="changeReaderAvatar" class="readerAction"
			method="changeReaderAvatar">
			<result name="login">/Login.jsp</result>
			<result name="success" type="chain">
				<param name="actionName">getReaderStatuForCurrent</param>
			</result>

		</action>
		<!-- 忘记密码 -->
		<action name="forgetReaderPassword" class="readerAction"
			method="forgetReaderPassword">
			<result name="success">/Login.jsp</result>
			<result name="input">/Login.jsp</result>
		</action>
		<!-- 还书记录分页查询 -->
		<action name="getReaderStatuForReturn" class="readerAction"
			method="getReaderStatu"><!--获取用户信息 -->
			<result name="success" type="chain"><!--若读者已经登录，获取借阅记录 -->
				<param name="actionName">getReturnByReader</param>
			</result>
			<result name="none">/Login.jsp</result><!--若读者未登录，跳转到登录界面 -->
		</action>
		<action name="getReturnByReader" class="borrowrecordAction"
			method="getReturnPageByReader">
			<result name="success" type="chain">
				<param name="actionName">getBookByReturn</param>
			</result>
			<result name="getfine" type="chain">
				<param name="actionName">getReaderFiner</param><!-- 若fine为空，去取fine -->
			</result>
		</action>
		<action name="getReaderFiner" class="borrowrecordAction"
			method="getReaderFine">
			<result name="success" type="chain">
				<param name="actionName">getBookByReturn</param>
			</result>
		</action>
		<action name="getBookByReturn" class="bookAction"
			method="getBooksbyborrowPage"><!-- 依赖借阅记录获取对应的书籍信息 -->
			<result name="success">/ReaderJsp/Reader_Return.jsp</result><!--结束action，返回借阅记录界面 -->
		</action>
		<!--查询预约记录 -->
		<action name="getReaderStatuForCurrent" class="readerAction"
			method="getReaderStatu"><!--获取用户信息 -->
			<result name="success" type="chain"><!--若读者已经登录，获取借阅记录 -->
				<param name="actionName">getCurrentRecordByReader</param>
			</result>
			<result name="none">/Login.jsp</result><!--若读者未登录，跳转到登录界面 -->
		</action>
		<action name="getCurrentRecordByReader"
			class="currentrecordAction" method="getCurrentRecord">
			<result name="success" type="chain">
				<param name="actionName">getBooksbycurrentRecords</param>
			</result>
		</action>
		<action name="getBooksbycurrentRecords" class="bookAction"
			method="getBooksbycurrentRecords"><!-- 依赖借阅记录获取对应的书籍信息 -->
			<result name="success">/ReaderJsp/Reader_Reservation.jsp</result><!--结束action，返回借阅记录界面 -->
		</action>
		<!-- Reader搜索书籍 -->
		<action name="searchBook" class="bookAction"
			method="searchBook">
			<result name="success" type="chain">
				<param name="actionName">isReservation</param>
			</result>

		</action>
		<action name="isReservation" class="currentrecordAction"
			method="isReservation"><!-- 依赖借阅记录获取对应的书籍信息 -->
			<result name="success">/ReaderJsp/category.jsp</result>
		</action>
		<!--librarian登陆界面 -->
		<action name="librarianlogin" class="librarianAction"
			method="signin">
			<result name="success">/librarian_jsp/BookManagement.jsp</result>
			<result name="input">/Login.jsp</result>
		</action>
		<!-- 预约书籍 -->
		<action name="getReaderStatuForReserveBook"
			class="readerAction" method="getReaderStatu"><!--获取用户信息 -->
			<result name="success" type="chain">
				<param name="actionName">reserveBook</param>
			</result>
			<result name="none">/Login.jsp</result><!--若读者未登录，跳转到登录界面 -->
		</action>
		<action name="reserveBook" class="bookAction"
			method="reserveBook">
			<result name="success" type="chain">
				<param name="actionName">readeraddRecord</param>
			</result>
			<result name="error">/Reserve_error.jsp</result>
		</action>
		<action name="readeraddRecord" class="currentrecordAction"
			method="addRecord">
			<result name="success" type="chain">
				<param name="actionName">searchBook</param>
			</result>
		</action>
		<!-- <action name="addRecord" class="currentRecordAction" method="addRecord"> 
			<result name="success">/Reserve_success.jsp</result> </action> -->


		<!-- Librarian Url跳转 -->

		<action name="BookManagement">
			<result name="success">/librarian_jsp/BookManagement.jsp</result>
		</action>
		<action name="BookSearch">
			<result name="success">/librarian_jsp/BookSearch.jsp</result>
		</action>
		<action name="ReaderRegister">
			<result name="success">/librarian_jsp/ReaderRegister.jsp</result>
		</action>
		<action name="BorrowHistory">
			<result name="success">/librarian_jsp/BorrowHistory.jsp</result>
		</action>
		<action name="BookReturn">
			<result name="success">/librarian_jsp/BookReturn.jsp</result>
		</action>
		<action name="BookBorrow">
			<result name="success">/librarian_jsp/BookBorrow.jsp</result>
		</action>
		<action name="IncomeHistory">
			<result name="success">/librarian_jsp/IncomeHistory.jsp</result>
		</action>
		<action name="NewsPost">
			<result name="success">/librarian_jsp/NewsPost.jsp</result>
		</action>
		<action name="Logout">
			<result name="success">/Login.jsp</result>
		</action>
		<!-- Librarian添加书籍 -->
		<action name="addBook" class="bookAction" method="addBook">
			<result name="success" type="chain">searchBook1</result>
		</action>
		<action name="addBookISBN" class="bookAction"
			method="addBookISBN">
			<result name="success" type="chain">searchBook1</result>
		</action>
		<!-- 跳转Librarian添加书籍界面 -->
		<action name="addBookPage" class="bookAction"
			method="addBookPage">
			<result name="success">/AddBook.jsp</result>
		</action>
		<!-- Librarian查看书籍列表 -->
		<action name="displayBooks" class="bookAction" method="display">
			<result name="success">/librarian_jsp/BookList.jsp</result>
		</action>

		<!-- Librarian搜索书籍 -->
		<action name="searchBook1" class="bookAction"
			method="searchBook">
			<result name="success">/librarian_jsp/BookSearch.jsp</result>
		</action><!-- Librarian删除书籍 -->
		<action name="deleteBook" class="bookAction"
			method="deleteBook">
			<result name="success" type="chain">
				<param name="actionName">searchBook1</param>

				<param name="actionName">addRecord</param>

			</result>
		</action>
		<!-- Librarian添加删除书籍记录 -->
		<action name="addRecord" class="deleterecordAction"
			method="addRecord">
			<result name="success" type="chain">

				<param name="actionName">searchBooks</param>
			</result>
		</action>

		<!-- Librarian修改书籍信息 -->
		<action name="editBook" class="bookAction" method="editBook">
			<result name="success" type="chain">searchBook1</result>
		</action>

		<!-- 跳转Librarian添加书籍界面 -->
		<action name="addBookPage" class="bookAction"
			method="addBookPage">
			<result name="success">/AddBook.jsp</result>
		</action>
		<!-- 跳转Post主页界面 -->
		<action name="getLibStatuForPostNews" class="librarianAction"
			method="getLibstatu"><!--获取用户信息 -->
			<result name="none">
				/Login.jsp
			</result>
			<result name="success" type="chain"><!--若lib已经登录，post记录 -->
				<param name="actionName">PostNews</param>
			</result>
		</action>
		<action name="PostNews" class="postAction" method="PostNews">
			<result name="success">/index.jsp</result>
		</action>

		<action name="displayPosts" class="postAction"
			method="displayPosts">
			<result name="success">/index.jsp</result>
		</action>
		<action name="displayPostItem" class="postAction"
			method="displayPosts">
			<result name="success">/librarian_jsp/PostNewItem.jsp</result>
		</action>
		<!-- Librarian帮助用户完成借书操作 -->
		<action name="borrowBookFindReader" class="readerAction"
			method="getReaderById">
			<result name="success" type="chain">
				<param name="actionName">findReaderCanBorrow</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookBorrow</param>
			</result>
		</action>
		<action name="findReaderCanBorrow" class="borrowrecordAction"
			method="findReaderCanBorrow">
			<result name="success" type="chain">
				<param name="actionName">borrowBookFindBook</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookBorrow</param>
			</result>
		</action>
		<action name="borrowBookFindBook" class="bookAction"
			method="getBookById">
			<result name="success" type="chain">
				<param name="actionName">findBookCanBeBorrow</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookBorrow</param>
			</result>
		</action>
		<action name="findBookCanBeBorrow" class="bookAction"
			method="findBookIsBorrowed">
			<result name="success" type="chain">
				<param name="actionName">borrowBookFindOrder</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookBorrow</param>
			</result>
		</action>
		<action name="borrowBookFindOrder" class="currentrecordAction"
			method="findBookIsOrder">
			<result name="success" type="chain">
				<param name="actionName">borrowBook</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookBorrow</param>
			</result>
		</action>
		<action name="borrowBook" class="bookAction"
			method="borrowBook">
			<result name="success" type="chain">
				<param name="actionName">borrowBookByReaderIDBookID</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookBorrow</param>
			</result>
		</action>

		<action name="borrowBookByReaderIDBookID"
			class="borrowrecordAction" method="borrowBook">
			<result name="success">/librarian_jsp/Librarian_Borrow_Success.jsp
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookBorrow</param>
			</result>
		</action>
		<!-- Librarian帮助用户完成还书功能 -->
		<action name="returnBookFindBook" class="bookAction"
			method="getBookById">
			<result name="success" type="chain">
				<param name="actionName">returnBook</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookReturn</param>
			</result>
		</action>
		<action name="returnBook" class="bookAction"
			method="returnBook">
			<result name="success" type="chain">
				<param name="actionName">getBorrowrecordbyBook</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookReturn</param>
			</result>
		</action>
		<action name="getBorrowrecordbyBook" class="borrowrecordAction"
			method="setReturnBorrowrecordbyBook">
			<result name="success" type="chain">
				<param name="actionName">getReadersbyBorrowrecords</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BookReturn</param>
			</result>
		</action>
		<action name="getReadersbyBorrowrecords" class="readerAction"
			method="getReadersbyBorrwrecords"><!-- 依赖借阅记录获取对应的读者信息 -->
			<result name="success">/librarian_jsp/Librarian_Return_Success.jsp
			</result><!--结束action，返回借阅记录界面 -->
		</action>
		<!-- Librarian查看所有用户的借书列表 -->
		<action name="displayBorrowrecord" class="borrowrecordAction"
			method="getAllBorrowrecord">
			<result name="success" type="chain">
				<param name="actionName">getBooksbyBorrowrecordsbyLibrarian</param>
			</result>
		</action>
		<!-- Librarian查找特定用户id的借书列表 -->
		<action name="findBRByReader" class="readerAction"
			method="getReaderById">
			<result name="success" type="chain">
				<param name="actionName">getBorrowrecordsbyReaders</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BorrowHistory</param>
			</result>
		</action>
		<!-- Librarian查找特定名称的用户的借书列表 -->
		<action name="findBRByReaderName" class="readerAction"
			method="getReaderByName">
			<result name="success" type="chain">
				<param name="actionName">getBorrowrecordsbyReaders</param>
			</result>
			<result name="error" type="chain">
				<param name="actionName">BorrowHistory</param>
			</result>
		</action>
		<!--通过用户查找借书记录 -->

		<action name="getBorrowrecordsbyReaders"
			class="borrowrecordAction" method="getBorrowrecordByReaders">
			<result name="success" type="chain">
				<param name="actionName">getBooksbyBorrowrecordsbyLibrarian</param>
			</result>
		</action>
		<!--通过记录查找书籍 -->
		<action name="getBooksbyBorrowrecordsbyLibrarian"
			class="bookAction" method="getBooksbyBorrwrecords"><!-- 依赖借阅记录获取对应的书籍信息 -->
			<result name="success" type="chain">
				<param name="actionName">getReadersbyBorrowrecordsbyLibrarian</param>
			</result>
		</action>
		<!--通过记录查找用户 -->
		<action name="getReadersbyBorrowrecordsbyLibrarian"
			class="readerAction" method="getReadersbyBorrwrecords"><!-- 依赖借阅记录获取对应的读者信息 -->
			<result name="success">/librarian_jsp/BorrowHistory.jsp</result><!--结束action，返回借阅记录界面 -->
		</action>
		<!-- librarian 操作报错 -->
		<action name="getErrorPage" class="borrowrecordAction"
			method="showError">
			<result name="success">/librarian_jsp/Librarian_Borrow_Error.jsp
			</result>
		</action>
		<!-- Librarian加入资金记录 -->
		<action name="addPayrecord" class="payrecordAction"
			method="addPayrecord">
			<result name="success" type="chain">
				<param name="actionName">displayPayrecords</param>
			</result>
		</action>
		<!-- 加入罚金 -->
		<action name="getReaderFine1" class="borrowrecordAction"
			method="getReaderFine">
			<result name="success" type="chain">
				<param name="actionName">addPayrecord</param>
			</result>
		</action>
		<!-- 加入保证金 -->
		<action name="findReaderNum" class="readerAction"
			method="findReaderNum">
			<result name="success" type="chain">
				<param name="actionName">getReaderFine1</param>
			</result>
		</action>
		<!-- Librarian查看资金列表 -->

		<action name="displayPayrecords" class="payrecordAction"
			method="displayPayrecords">
			<result name="success">/Payrecord.jsp</result>
		</action>

		<!-- 获取所有读者信息 -->
		<action name="getAllReaders" class="readerAction"
			method="findReaderPage">
			<result name="success">/librarian_jsp/ReaderRegister.jsp</result>
			<result name="input">/Login.jsp</result>
		</action>
		<!-- 注册Reader界面 -->
		<action name="readerregister" class="readerAction"
			method="register">
			<result name="success" type="chain">
				<param name="actionName">getAllReaders</param>
			</result>
			<result name="input">/Login.jsp</result>
		</action>
		<!--修改reader信息 -->
		<action name="setreader" class="readerAction"
			method="setreader">
			<result name="success" type="chain">
				<param name="actionName">getAllReaders</param>
			</result>
			<result name="input">/Login.jsp</result>
		</action>
		<!-- 删除reader -->
		<action name="getReaderForDelete" class="readerAction" method="getReaderForDelete">
			<result name="success" type="chain">
				<param name="actionName">checkReader</param>
			</result>
			<result name="input">/Login.jsp</result>
		</action>
		<action name="checkReader" class="borrowrecordAction" method="checkReader">
			<result name="success" type="chain">
				<param name="actionName">cancelReservation</param><!--若读者能删除，去取消读者的预约记录 -->
			</result>
			<result name="input" type="chain">
				<param name="actionName">getAllReaders</param><!--若读者不能删除，结束动作 -->
			</result>
		</action>
		<action name="cancelReservation" class="currentrecordAction" method="cancelAllReservation">
			<result name="success" type="chain">
				<param name="actionName">restoreBookStatus</param><!--去恢复取消预约的书籍 -->
			</result>
		</action>
		<action name="restoreBookStatus" class="bookAction" method="returnBookByCurrentRecords">
			<result name="success" type="chain">
				<param name="actionName">deleteReader</param><!--去最终删除读者 -->
			</result>
		</action>
		<action name="deleteReader" class="readerAction" method="deleteReader">
			<result name="success" type="chain">
				<param name="actionName">getAllReaders</param><!--完成删除，跳回原界面 -->
			</result>
		</action>
		<!-- Admin删除馆员 -->
		<action name="deleteLibrarian" class="librarianAction"
			method="deleteLibrarian">
			<result name="success" type="chain">displayLibrarians</result>
		</action>
		<!-- Admin修改馆员信息 -->
		<action name="editLibrarian" class="librarianAction"
			method="editLibrarian">
			<result name="success">/EditLibrarian.jsp</result>
		</action>
		<!-- Admin查看书籍列表 -->
		<action name="adminDisplayBooks" class="bookAction"
			method="display">
			<result name="success">/Admin_Display_Book.jsp</result>
		</action>
		<!-- Admin修改书籍逾期罚金和归还期限 -->
		<action name="adminEditBook" class="bookAction"
			method="adminEditBook">
			<result name="success">/AdminEditBook.jsp</result>
		</action>
	</package>



</struts>