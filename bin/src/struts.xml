<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<constant name="struts.objectFactory" value="spring" />

	<package name="default" extends="struts-default" namespace="/">
		<!-- Admin登录界面 -->
		<action name="adminlogin" class="adminAction" method="signin">
			<result name="success">/Login_success.jsp</result>
			<result name="input">/Admin_login.jsp</result>
		</action>
		<!-- 注册Librarian界面 -->
		<action name="librariansignup" class="librarianAction"
			method="signup">
			<result name="success">/Librarian_success.jsp</result>
			<result name="input">/Admin_register.jsp</result>
		</action>
		<!-- Admin 修改密码 -->
		<action name="changePassword" class="adminAction"
			method="changePassword">
			<result name="success">/Change_Success.jsp</result>
			<result name="input">/Login_success.jsp</result>
			<result name="login">/Admin_login.jsp</result>
		</action>
		<action name="logout" class="adminAction" method="logout">
			<result name="success">/Admin_login.jsp</result>
			<result name="failure">/Admin_login.jsp</result>
		</action>
		<action name="displayLibrarians" class="librarianAction"
			method="show">
			<result name="success">/Librarian.jsp</result>
		</action>


		<!-- Reader功能 -->
		<!-- 登录登出 -->
		<action name="readersignin" class="readerAction"
			method="signin">
			<result name="success" type="chain"><!--登录成功后跳转到借阅记录界面，后期需要更改 -->
				<param name="actionName">getCurrentRecordByReader</param>
			</result>
			<result name="input">/Reader_signin.jsp</result>
		</action>

		<!-- Reader界面 -->
		<action name="readersignout" class="readerAction"
			method="signout"><!--登出后跳转到登录界面，后期需要更改 -->
			<result name="success">/Reader_signin.jsp</result>
		</action>
		<!-- 获取借阅记录 -->

		<!-- 搜索书籍 -->
		<action name="searchBook" class="bookAction"
			method="searchBook">
			<result name="success">/category.jsp</result>
		</action>

		<!-- 当前借阅记录分页查询 -->
		<action name="getReaderStatuForBorrowPage" class="readerAction"
			method="getReaderStatu"><!--获取用户信息 -->
			<result name="success" type="chain"><!--若读者已经登录，获取借阅记录 -->
				<param name="actionName">getBorrowPageByReader</param>
			</result>
			<result name="none">/Reader_signin.jsp</result><!--若读者未登录，跳转到登录界面 -->
		</action>
		<action name="getBorrowPageByReader" class="borrowrecordAction"
			method="getBorrowPageByReader">
			<result name="success" type="chain">
				<param name="actionName">getBooksbyBorrowPage</param>
			</result>
			<result name="getfine" type="chain">
				<param name="actionName">getReaderFine</param><!-- 若fine为空，去取fine -->
			</result>
		</action>
		<!-- 获取尚未支付的罚金 -->
		<action name="getReaderFine" class="borrowrecordAction"
			method="getReaderFine">
			<result name="success" type="chain">
				<param name="actionName">getBooksbyBorrowPage</param>
			</result>
		</action>

		<!--查询当前借阅记录和预约记录 -->
		<action name="getReaderStatuForCurrent" class="readerAction"
			method="getReaderStatu"><!--获取用户信息 -->
			<result name="success" type="chain"><!--若读者已经登录，获取借阅记录 -->
				<param name="actionName">getCurrentRecordByReader</param>
			</result>
			<result name="none">/Reader_signin.jsp</result><!--若读者未登录，跳转到登录界面 -->
		</action>
		<action name="getCurrentRecordByReader"
			class="currentrecordAction" method="getCurrentRecord">
			<result name="success" type="chain">
				<param name="actionName">getBooksbycurrentRecords</param>
			</result>
		</action>
		<action name="getBooksbycurrentRecords" class="bookAction"
			method="getBooksbycurrentRecords"><!-- 依赖借阅记录获取对应的书籍信息 -->
			<result name="success">/Reader_dashboard.jsp</result><!--结束action，返回借阅记录界面 -->
		</action>
		<!-- Librarian Url跳转 -->		
		<action name="BookManagement">
			<result name="success">/librarian_jsp/BookManagement.jsp</result>
		</action>
		<action name="BookSearch">
			<result name="success">/librarian_jsp/BookSearch.jsp</result>
		</action>
		<action name="ReaderRegister">
			<result name="success">/librarian_jsp/ReaderRegister.jsp</result>
		</action>
		<action name="BorrowHistory">
			<result name="success">/librarian_jsp/BorrowHistory.jsp</result>
		</action>
		<action name="BookReturn">
			<result name="success">/librarian_jsp/BookReturn.jsp</result>
		</action>
		<action name="BookBorrow">
			<result name="success">/librarian_jsp/BookBorrow.jsp</result>
		</action>
		<action name="IncomeHistory">
			<result name="success">/librarian_jsp/IncomeHistory.jsp</result>
		</action>
		<action name="NewsPost">
			<result name="success">/librarian_jsp/NewsPost.jsp</result>
		</action>
		<action name="Logout">
			<result name="success">/librarian_jsp/Logout.jsp</result>
		</action>
		<!--librarian登陆界面 -->
		<action name="librarianlogin" class="librarianAction" method="signin">
			<result name="success">/librarian_jsp/PostNews.jsp</result>
			<result name="input">/librarian_jsp/Librarian_login.jsp</result>
		</action>
		<!-- Librarian添加书籍 -->
		<action name="addBook" class="bookAction" method="addBook">
			<result name="success" type="chain">displayBooks</result>
		</action>
		<!-- 跳转Librarian添加书籍界面 -->
		<action name="addBookPage" class="bookAction"
			method="addBookPage">
			<result name="success">/librarian_jsp/AddBook.jsp</result>
		</action>
		<!-- Librarian查看书籍列表 -->
		<action name="displayBooks" class="bookAction" method="display">
			<result name="success">/librarian_jsp/BookList.jsp</result>
		</action>
		<!-- Librarian删除书籍 -->
		<action name="deleteBook" class="bookAction"
			method="deleteBook">
			<result name="success" type="chain">displayBooks</result>
		</action>
		<!-- Librarian修改书籍信息 -->
		<action name="editBook" class="bookAction" method="editBook">
			<result name="success">/EditBook.jsp</result>
		</action>
		<!-- Librarian帮助用户完成借书操作 -->
		<action name="borrowBookFindReader" class="readerAction" method="getReaderById">
			<result name="success" type="chain">
				<param name="actionName">findReaderCanBorrow</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BookBorrow</param></result>
		</action>
		<action name="findReaderCanBorrow" class="borrowrecordAction" method="findReaderCanBorrow">
			<result name="success" type="chain">
				<param name="actionName">borrowBookFindBook</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BookBorrow</param></result>
		</action>
		<action name="borrowBookFindBook" class="bookAction" method="getBookById">
			<result name="success" type="chain">
				<param name="actionName">borrowBookFindOrder</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BookBorrow</param></result>
		</action>
		<action name="borrowBookFindOrder" class="currentrecordAction" method="findBookIsOrder">
			<result name="success" type="chain">
				<param name="actionName">findBookCanBeBorrow</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BookBorrow</param></result>
		</action>
		<action name="findBookCanBeBorrow" class="bookAction" method="findBookIsBorrowed">
			<result name="success" type="chain">
				<param name="actionName">borrowBook</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BookBorrow</param></result>
		</action>
		<action name="borrowBook" class="bookAction" method="borrowBook">
			<result name="success" type="chain">
				<param name="actionName">borrorBookByReaderIDBookID</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BookBorrow</param></result>
		</action>
		<action name="borrorBookByReaderIDBookID" class="borrowrecordAction" method="borrowBook">
			<result name="success">/librarian_jsp/Librarian_Borrow_Success.jsp</result>
			<result name="error" type="chain"><param name="actionName">BookBorrow</param></result>
		</action>
		<!-- Librarian帮助用户完成还书功能 -->
		<action name="returnBookFindBook" class="bookAction" method="getBookById">
			<result name="success" type="chain">
				<param name="actionName">returnBook</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BookReturn</param></result>
		</action>
		<action name="returnBook" class="bookAction" method="returnBook">
			<result name="success" type="chain">
				<param name="actionName">getBorrowrecordbyBook</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BookReturn</param></result>
		</action>
		<action name="getBorrowrecordbyBook" class="borrowrecordAction" method="setReturnBorrowrecordbyBook">
			<result name="success" type="chain">
				<param name="actionName">getReadersbyBorrowrecords</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BookReturn</param></result>
		</action>
		<action name="getReadersbyBorrowrecords" class="readerAction"
			method="getReadersbyBorrwrecords"><!-- 依赖借阅记录获取对应的读者信息 -->
			<result name="success">/librarian_jsp/Librarian_Return_Success.jsp</result><!--结束action，返回借阅记录界面 -->
		</action>
		<!-- Librarian查看所有用户的借书列表 -->
		<action name="displayBorrowrecord" class="borrowrecordAction" method="getAllBorrowrecord">
			<result name="success" type="chain">
				<param name="actionName">getBooksbyBorrowrecordsbyLibrarian</param>
			</result>
		</action>
		<!-- Librarian查找特定用户id的借书列表 -->
		<action name="findBRByReader" class="readerAction" method="getReaderById">
			<result name="success" type="chain">
				<param name="actionName">getBorrowrecordsbyReaders</param>
			</result>
			<result name="error" type="chain"><param name="actionName">BorrowHistory</param></result>
		</action>
		<!-- Librarian查找特定名称的用户的借书列表 -->
		<action name="findBRByReaderName" class="readerAction" method="getReaderByName">
			<result name="success" type="chain">
				<param name="actionName">getBorrowrecordsbyReaders</param>
			</result>
						<result name="error" type="chain"><param name="actionName">BorrowHistory</param></result>
		</action>
		<!--通过用户查找借书记录 -->
		<action name="getBorrowrecordsbyReaders" class="borrowrecordAction" method="getBorrowrecordByReaders">
			<result name="success" type="chain">
				<param name="actionName">getBooksbyBorrowrecordsbyLibrarian</param>
			</result>
		</action>
		<!--通过记录查找书籍 -->
		<action name="getBooksbyBorrowrecordsbyLibrarian" class="bookAction"
			method="getBooksbyBorrwrecords"><!-- 依赖借阅记录获取对应的书籍信息 -->
			<result name="success" type="chain">
				<param name="actionName">getReadersbyBorrowrecordsbyLibrarian</param>
			</result>
		</action>
		<!--通过记录查找用户 -->
		<action name="getReadersbyBorrowrecordsbyLibrarian" class="readerAction"
			method="getReadersbyBorrwrecords"><!-- 依赖借阅记录获取对应的读者信息 -->
			<result name="success">/librarian_jsp/BorrowHistory.jsp</result><!--结束action，返回借阅记录界面 -->
		</action>
		<!-- librarian 操作报错 -->
		<action name="getErrorPage" class="borrowrecordAction" method="showError">
			<result name="success">/librarian_jsp/Librarian_Borrow_Error.jsp</result>
		<!-- 跳转Librarian添加书籍界面 -->
		<action name="addBookPage" class="bookAction"
			method="addBookPage">
			<result name="success">/AddBook.jsp</result>
		</action>
		<!-- 跳转Post主页界面 -->
		<action name="PostNews" class="postAction" 
		method="PostNews">
			<result name="success">/index.jsp</result>
		</action>
		<action name="displayPosts" class="postAction" method="displayPosts">
			<result name="success">/index.jsp</result>
		</action>
		<action name="displayPostItem" class="postAction" method="displayPosts">
			<result name="success">/librarian_jsp/PostNewItem.jsp</result>
		</action>
		<!-- Admin删除馆员 -->
		<action name="deleteLibrarian" class="librarianAction"
			method="deleteLibrarian">
			<result name="success" type="chain">displayLibrarians</result>
		</action>
		<!-- Admin修改馆员信息 -->
		<action name="editLibrarian" class="librarianAction"
			method="editLibrarian">
			<result name="success">/EditLibrarian.jsp</result>
		</action>
		<!-- Admin查看书籍列表 -->
		<action name="adminDisplayBooks" class="bookAction" method="display">
			<result name="success">/Admin_Display_Book.jsp</result>
		</action>
		<!-- Admin修改书籍逾期罚金和归还期限 -->
		<action name="adminEditBook" class="bookAction" method="adminEditBook">
			<result name="success">/AdminEditBook.jsp</result>
		</action>
	</package>
</struts>